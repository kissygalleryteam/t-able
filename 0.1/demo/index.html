<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>TAble的demo</title>
    <script src="http://g.tbcdn.cn/kissy/k/1.4.1/seed.js" charset="utf-8"></script>
    <link rel="stylesheet" href="http://g.tbcdn.cn/kissy/k/1.3.0/css/dpl/base-min.css">
</head>
<body>
<h2>TAble的demo</h2>

<table>
    <thead>
    <tr>
        <th colspan="3">
            宝贝信息
        </th>
        <th>价格</th>
        <th>库存</th>
        <th>销量</th>
        <th>发布时间</th>
        <th>操作</th>
    </tr>
    <tr>
        <td colspan="8">
            <input type="checkbox"/>
            <div class="" style="float:right;">< ></div>
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
                    <td>
                        <input type="checkbox"/>
                    </td>
                    <td>
                        <img src="http://img.f2e.taobao.net/beauty.png_80x80.jpg" alt=""/>
                    </td>
                    <td>
                        <div class="wrap">
                            <div class="bd"></div>
                        </div>
                        <div class="cell">
                            <a href="#">title</a>
                        </div>


                    </td>
        <td>
            price
        </td>
        <td>
            quantity
        </td>
        <td>
            saleQuantity
        </td>
        <td>
            publishDate
        </td>
        <td>
            actions
        </td>
    </tr>
    <tr>
                    <td>
                        <input type="checkbox"/>
                    </td>
                    <td>
                        <img src="http://img.f2e.taobao.net/beauty.png_80x80.jpg" alt=""/>
                    </td>
                    <td>
                        <a href="#">title</a>
                    </td>
        <td>
            price
        </td>
        <td>
            quantity
        </td>
        <td>
            saleQuantity
        </td>
        <td>
            publishDate
        </td>
        <td>
            actions
        </td>
    </tr>
    </tbody>
</table>

<div id="grid"></div>

<script>
    var S = KISSY;
    if (S.Config.debug) {
        var srcPath = "../../";
        S.config({
            packages:[
                {
                    name:"gallery/t-able",
                    path:srcPath,
                    charset:"utf-8",
                    ignorePackageNameInUri:true
                }
            ]
        });
    }

    S.use('gallery/t-able/0.1/index', function (S, TAble) {
          var data = {
                  pagination: {
                      current: 1,
                      size: 20,
                      total: 200
                  },
                  rows: [
                      {
                          image: "http://img.f2e.taobao.net/beauty.png_80x80.jpg",
                          title: "test",
                          price: "11.11",
                          quantity: 0
                      },
                      {
                          image: "http://img.f2e.taobao.net/default.png_80x80.jpg",
                          title: "test",
                          price: "110.11",
                          quantity: "22"
                      }
                  ],
                  header: {
                      buttons: []
                  }
              };


          var imageColumn = new TAble.Column({
              caption: "主图",
              name: "image",
              width: "",
              template: '<img src="{{image}}" alt="" />',
              events: {
                  "click img": function(ev) {
                      console.log(ev);
                  }
              }
          });

        var columns = [
            imageColumn,
            {
                name: "title",
                width: "",
                template: "{{title}}"
            },
            {
                name: "price"
            },
            {
                name: "quantity"
            }
        ];

        var footer = new TAble.Footer({
            colspan: 4,
            content: "<span>test foot</span>",
            events: {
                "click span": function() {
                    console.log('click foot');
                }
            }
        });

        var header = new TAble.Header({
            columns: [
                {
                    colspan: ["title", "image", "toggle"],
                    caption: "宝贝信息"
                },
                {
                    caption: "价格"
                }
            ],
            events: {
                "change select": function(ev) {
                    console.log(ev.target);
                },
                "click .sortable": function(ev) {
                    console.log(ev.target)
                }
            }
        });

        var table = new TAble({
            data: data,
            columns: columns,
            parent: "#grid",
            head: header,
            foot: footer
        });

        table.render();

        var column = table.getColumnByName("title");

//        column.on('click', function() {
//
//        });
    })
</script>
</body>
</html>
